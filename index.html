<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>14/2 cho Ph√πng Nh∆∞ √ù</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@500;600;700&family=Montserrat:wght@300;400;600;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap"
    rel="stylesheet">

  <style>
    :root {
      --primary: #900c3f;
      --secondary: #ff3366;
      --accent: #ff6f91;
      --bg-dark: #1a050b;
      --bg-light: #fff5e6;
      --text-highlight: #ffe08f;
      --glass-bg: rgba(255, 255, 255, 0.05);
      --glass-border: rgba(255, 255, 255, 0.1);
      --shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
    }

    /* Reset */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html,
    body {
      width: 100%;
      height: 100%;
      overflow: hidden;
    }

    body {
      font-family: 'Montserrat', sans-serif;
      background: radial-gradient(circle at center, #3a0e18 0%, #1a050b 40%, #000 100%);
      color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      transition: background 0.5s ease;
      overflow: hidden;
    }

    /* Background Animation */
    #bg-canvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
    }

    /* Main Container with Glassmorphism */
    .container {
      position: relative;
      width: 90%;
      max-width: 1000px;
      height: 90vh;
      display: flex;
      gap: 20px;
      padding: 20px;
      border-radius: 20px;
      background: var(--glass-bg);
      border: 1px solid var(--glass-border);
      backdrop-filter: blur(10px);
      box-shadow: var(--shadow);
      z-index: 10;
      opacity: 0;
      transform: scale(0.95);
      transition: opacity 1s ease, transform 1s ease;
    }

    .container.active {
      opacity: 1;
      transform: scale(1);
    }

    /* Columns */
    .left-col,
    .right-col {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 15px;
      overflow-y: auto;
      scrollbar-width: thin;
      /* Firefox */
      padding-right: 5px;
    }

    /* Scrollbar Styling */
    .left-col::-webkit-scrollbar,
    .right-col::-webkit-scrollbar {
      width: 6px;
    }

    .left-col::-webkit-scrollbar-thumb,
    .right-col::-webkit-scrollbar-thumb {
      background: rgba(255, 255, 255, 0.2);
      border-radius: 3px;
    }

    /* Intro Overlay */
    #intro-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: radial-gradient(circle, #2c0812, #000);
      z-index: 1000;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      transition: opacity 1s ease, visibility 1s ease;
    }

    #intro-overlay.hidden {
      opacity: 0;
      visibility: hidden;
      pointer-events: none;
    }

    .intro-title {
      font-family: 'Dancing Script', cursive;
      font-size: 3rem;
      color: #ffafd6;
      margin-bottom: 20px;
      text-shadow: 0 0 10px rgba(255, 175, 214, 0.5);
    }

    .intro-btn {
      padding: 12px 30px;
      font-size: 1.2rem;
      border: 1px solid rgba(255, 255, 255, 0.3);
      background: rgba(255, 255, 255, 0.05);
      color: white;
      border-radius: 30px;
      cursor: pointer;
      margin: 10px;
      transition: all 0.3s;
    }

    .intro-btn:hover {
      background: rgba(255, 255, 255, 0.2);
      transform: scale(1.05);
      box-shadow: 0 0 15px rgba(255, 255, 255, 0.2);
    }

    #no-btn {
      position: relative;
    }

    /* For moving effect */

    /* Typography */
    h1 {
      font-family: 'Dancing Script', cursive;
      font-size: 2.5rem;
      color: var(--text-highlight);
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
    }

    .subtitle {
      font-size: 0.9rem;
      color: rgba(255, 255, 255, 0.7);
      margin-bottom: 10px;
      font-style: italic;
    }

    /* Cards */
    .card {
      background: rgba(0, 0, 0, 0.3);
      padding: 20px;
      border-radius: 15px;
      border: 1px solid rgba(255, 255, 255, 0.05);
      transition: transform 0.3s ease;
    }

    .card:hover {
      transform: translateY(-2px);
    }

    /* Timer */
    .timer {
      display: flex;
      justify-content: space-between;
      gap: 10px;
      margin-top: 10px;
    }

    .timer-box {
      background: rgba(255, 255, 255, 0.08);
      padding: 10px;
      border-radius: 10px;
      text-align: center;
      flex: 1;
    }

    .timer-num {
      font-size: 1.5rem;
      font-weight: bold;
      color: var(--secondary);
    }

    .timer-label {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    /* Letter */
    .letter-container {
      position: relative;
      cursor: pointer;
      perspective: 1000px;
    }

    .envelope {
      background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 99%, #fecfef 100%);
      color: #555;
      padding: 40px 20px;
      border-radius: 10px;
      text-align: center;
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
      transition: transform 0.6s;
      transform-origin: center bottom;
      transform-style: preserve-3d;
    }

    .letter-container:hover .envelope {
      transform: rotateX(10deg);
    }

    .letter-content {
      position: relative;
      background:
        linear-gradient(135deg, rgba(255, 250, 242, 0.98), rgba(255, 242, 232, 0.99)),
        repeating-linear-gradient(
          0deg,
          rgba(255, 205, 220, 0.12) 0px,
          rgba(255, 205, 220, 0.12) 1px,
          transparent 1px,
          transparent 18px
        );
      color: #5a2734;
      padding: 24px 22px 20px;
      border-radius: 12px;
      font-family: 'Playfair Display', serif;
      line-height: 1.6;
      max-height: 0;
      overflow-y: hidden;
      margin-top: 10px;
      opacity: 0;
      transform: translateY(12px);
      transition: max-height 0.8s ease, opacity 0.6s ease, transform 0.6s ease;
    }

    .letter-content p {
      opacity: 0;
      transform: translateY(8px);
      transition: opacity 0.5s ease, transform 0.5s ease;
      font-size: 0.95rem;
      letter-spacing: 0.01em;
      margin-bottom: 6px;
    }

    .letter-content p:first-of-type {
      font-family: 'Dancing Script', cursive;
      font-size: 1.35rem;
      color: #b13b57;
    }

    .letter-content p:last-of-type {
      text-align: right;
      font-family: 'Dancing Script', cursive;
      font-size: 1.2rem;
      font-weight: 600;
      color: #b13b57;
      margin-top: 14px;
    }

    .letter-close-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      border: none;
      outline: none;
      border-radius: 999px;
      padding: 4px 10px;
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.09em;
      cursor: pointer;
      background: radial-gradient(circle at 0 0, #fff, #ffd6e8);
      color: #7a1931;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.25);
      opacity: 0.9;
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .letter-close-btn::before {
      content: "‚úï";
      font-size: 0.8rem;
    }

    .letter-close-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 6px 14px rgba(0, 0, 0, 0.35);
      background: radial-gradient(circle at 0 0, #fff, #ffc1dd);
    }

    .letter-container.open .envelope {
      animation: envelopeOpen 0.7s cubic-bezier(0.17, 0.84, 0.44, 1.1) forwards;
    }

    .letter-container.open .letter-content {
      max-height: 350px;
      overflow-y: auto;
      opacity: 1;
      transform: translateY(0);
    }

    .letter-container.open .letter-content p:nth-child(2) {
      transition-delay: 0.1s;
      opacity: 1;
      transform: translateY(0);
    }

    .letter-container.open .letter-content p:nth-child(3) {
      transition-delay: 0.25s;
      opacity: 1;
      transform: translateY(0);
    }

    .letter-container.open .letter-content p:nth-child(4) {
      transition-delay: 0.4s;
      opacity: 1;
      transform: translateY(0);
    }

    .letter-container.open .letter-content p:nth-child(5) {
      transition-delay: 0.55s;
      opacity: 1;
      transform: translateY(0);
    }

    .letter-container.open .letter-content p:nth-child(6) {
      transition-delay: 0.7s;
      opacity: 1;
      transform: translateY(0);
    }

    .letter-container.open .letter-content p:nth-child(7) {
      transition-delay: 0.85s;
      opacity: 1;
      transform: translateY(0);
    }

    .letter-container.open .letter-content p:nth-child(8) {
      transition-delay: 1s;
      opacity: 1;
      transform: translateY(0);
    }

    /* Music Player */
    .music-player {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .play-btn {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      border: none;
      background: var(--secondary);
      color: white;
      cursor: pointer;
      display: flex;
      justify-content: center;
      align-items: center;
      box-shadow: 0 0 10px var(--secondary);
    }

    .visualizer {
      flex: 1;
      height: 30px;
      display: flex;
      align-items: flex-end;
      gap: 2px;
    }

    .bar {
      flex: 1;
      background: var(--accent);
      border-radius: 2px;
      animation: equalize 0.5s infinite alternate;
    }

    /* Gift Grid */
    .gift-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
    }

    .gift-box {
      aspect-ratio: 1;
      border-radius: 14px;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      position: relative;
      overflow: hidden;
      background: radial-gradient(circle at 0 0, rgba(255, 255, 255, 0.25), transparent 55%),
        radial-gradient(circle at 100% 100%, rgba(255, 100, 150, 0.4), transparent 60%),
        rgba(255, 255, 255, 0.06);
      box-shadow: 0 10px 22px rgba(0, 0, 0, 0.4);
      transform-origin: center bottom;
      transition: transform 0.35s ease, box-shadow 0.35s ease, background 0.35s ease;
    }

    .gift-box::before {
      content: "";
      position: absolute;
      inset: -40%;
      background:
        radial-gradient(circle at 50% 0, rgba(255, 255, 255, 0.32), transparent 60%),
        radial-gradient(circle at 0 100%, rgba(255, 180, 210, 0.25), transparent 55%);
      opacity: 0;
      transform: translateY(20px);
      transition: opacity 0.45s ease, transform 0.45s ease;
      pointer-events: none;
    }

    .gift-inner {
      position: relative;
      width: 78%;
      height: 78%;
      transform-style: preserve-3d;
    }

    .gift-body {
      position: absolute;
      left: 0;
      right: 0;
      bottom: 0;
      height: 60%;
      border-radius: 10px;
      background: linear-gradient(145deg, #ff4b6e, #ff9fb3);
      box-shadow: 0 8px 18px rgba(0, 0, 0, 0.45);
    }

    .gift-lid {
      position: absolute;
      left: -6%;
      right: -6%;
      top: 0;
      height: 30%;
      border-radius: 10px;
      background: linear-gradient(145deg, #ffe1ed, #ffc0d6);
      box-shadow: 0 6px 14px rgba(0, 0, 0, 0.35);
      transform-origin: 50% 100%;
      transform-style: preserve-3d;
      transition: transform 0.35s ease;
    }

    .gift-lid::before {
      content: "";
      position: absolute;
      inset: 22% 42%;
      border-radius: 999px;
      background: radial-gradient(circle, #ff3366, #b3123a);
      box-shadow: 0 0 10px rgba(255, 80, 140, 0.9);
    }

    .gift-ribbon {
      position: absolute;
      inset: 0;
      pointer-events: none;
    }

    .gift-ribbon::before,
    .gift-ribbon::after {
      content: "";
      position: absolute;
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.8), rgba(255, 130, 170, 0.9));
    }

    .gift-ribbon::before {
      width: 18%;
      left: 41%;
      top: 10%;
      bottom: 0;
      border-radius: 999px;
    }

    .gift-ribbon::after {
      height: 18%;
      top: 36%;
      left: 8%;
      right: 8%;
      border-radius: 999px;
    }

    .gift-photo-frame {
      position: absolute;
      inset: 10%;
      border-radius: 11px;
      overflow: hidden;
      box-shadow: 0 6px 14px rgba(0, 0, 0, 0.45);
      transform: translateZ(10px);
      display: none;
    }

    .gift-photo-frame img {
      width: 100%;
      height: 100%;
      display: block;
      object-fit: cover;
      filter: saturate(1.05) contrast(1.03);
      transition: transform 0.4s ease, filter 0.4s ease;
    }

    .gift-icon {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.6rem;
      text-shadow: 0 4px 10px rgba(0, 0, 0, 0.6);
      transform: translateZ(22px);
      pointer-events: none;
    }

    .gift-light {
      position: absolute;
      left: -20%;
      right: -20%;
      bottom: -10%;
      height: 55%;
      background: radial-gradient(circle at 50% 0, rgba(255, 255, 255, 0.8), transparent 70%);
      opacity: 0;
      transform: scale(0.9);
      pointer-events: none;
    }

    .gift-sparkles {
      position: absolute;
      inset: -10%;
      pointer-events: none;
    }

    .gift-sparkles::before,
    .gift-sparkles::after {
      content: "";
      position: absolute;
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: radial-gradient(circle, #fff, #ffe08f, transparent);
      box-shadow: 0 0 12px rgba(255, 235, 150, 0.9);
      opacity: 0;
    }

    .gift-sparkles::before {
      top: 10%;
      left: 18%;
    }

    .gift-sparkles::after {
      top: 0;
      right: 12%;
    }

    .gift-box:hover {
      transform: translateY(-6px) scale(1.03) rotateX(6deg);
      box-shadow: 0 18px 30px rgba(0, 0, 0, 0.6);
      background: radial-gradient(circle at 0 0, rgba(255, 255, 255, 0.35), transparent 55%),
        radial-gradient(circle at 100% 100%, rgba(255, 120, 180, 0.6), transparent 60%),
        rgba(255, 255, 255, 0.12);
    }

    .gift-box:hover::before {
      opacity: 1;
      transform: translateY(0);
    }

    .gift-box:hover .gift-lid {
      transform: translateY(-2px);
    }

    .gift-box:hover .gift-photo-frame img {
      transform: scale(1.05);
      filter: saturate(1.1) contrast(1.06);
    }

    .gift-box.opening {
      animation: giftTilt 0.45s cubic-bezier(0.2, 0.7, 0.3, 1.4);
    }

    .gift-box.opening::before {
      opacity: 1;
      transform: translateY(0);
    }

    .gift-box.opening .gift-lid {
      animation: giftLidFlip 0.55s cubic-bezier(0.25, 0.9, 0.35, 1.4) forwards;
    }

    .gift-box.opening .gift-body {
      animation: giftBodyBounce 0.55s cubic-bezier(0.2, 0.7, 0.3, 1.4);
    }

    .gift-box.opening .gift-light {
      animation: giftLight 0.8s ease-out forwards;
    }

    .gift-box.opening .gift-sparkles::before,
    .gift-box.opening .gift-sparkles::after {
      animation: sparklePop 0.7s ease-out forwards;
    }

    /* Modal */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      z-index: 2000;
      justify-content: center;
      align-items: center;
    }

    .modal-content {
      background: white;
      color: #333;
      padding: 30px;
      border-radius: 20px;
      max-width: 400px;
      width: 90%;
      text-align: center;
      position: relative;
      animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    .modal-close {
      position: absolute;
      top: 10px;
      right: 15px;
      font-size: 1.5rem;
      cursor: pointer;
      color: #999;
    }

    /* Keyframes */
    @keyframes equalize {
      0% {
        height: 10%;
      }

      100% {
        height: 80%;
      }
    }

    @keyframes popIn {
      from {
        transform: scale(0.5);
        opacity: 0;
      }

      to {
        transform: scale(1);
        opacity: 1;
      }
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
      }

      to {
        opacity: 1;
      }
    }

    @keyframes envelopeOpen {
      0% {
        transform: translateY(0) rotateX(0deg) scale(1);
        opacity: 1;
      }

      60% {
        transform: translateY(-10px) rotateX(-25deg) scale(1.03);
      }

      100% {
        transform: translateY(-25px) rotateX(-80deg) scale(0.95);
        opacity: 0;
      }
    }

    @keyframes giftTilt {
      0% {
        transform: translateY(0) scale(1) rotateX(0deg);
      }

      40% {
        transform: translateY(-8px) scale(1.06) rotateX(10deg);
      }

      70% {
        transform: translateY(2px) scale(0.99) rotateX(-4deg);
      }

      100% {
        transform: translateY(0) scale(1) rotateX(0deg);
      }
    }

    @keyframes giftLidFlip {
      0% {
        transform: rotateX(0deg);
      }

      60% {
        transform: rotateX(-75deg) translateY(-4px);
      }

      100% {
        transform: rotateX(-65deg) translateY(-2px);
      }
    }

    @keyframes giftBodyBounce {
      0% {
        transform: translateY(0);
      }

      40% {
        transform: translateY(-4px);
      }

      70% {
        transform: translateY(2px);
      }

      100% {
        transform: translateY(0);
      }
    }

    @keyframes giftLight {
      0% {
        opacity: 0;
        transform: scale(0.9);
      }

      40% {
        opacity: 1;
        transform: scale(1.05);
      }

      100% {
        opacity: 0;
        transform: scale(1.1);
      }
    }

    @keyframes sparklePop {
      0% {
        opacity: 0;
        transform: translate3d(0, 0, 0) scale(0.6);
      }

      40% {
        opacity: 1;
        transform: translate3d(-8px, -18px, 0) scale(1.05);
      }

      100% {
        opacity: 0;
        transform: translate3d(6px, -30px, 0) scale(0.9);
      }
    }

    /* Mobile & Responsive Enhancements */
    @media (max-width: 768px) {
      .container {
        flex-direction: column;
        height: auto;
        padding: 15px;
        width: 95%;
        max-height: none;
        overflow-y: visible;
        padding-bottom: 80px;
        /* Space for scrolling */
      }

      .left-col,
      .right-col {
        overflow: visible;
        gap: 12px;
        padding-right: 0;
      }

      /* Typography adjustments */
      h1 {
        font-size: 1.8rem;
        text-align: center;
      }

      .subtitle {
        text-align: center;
        font-size: 0.85rem;
      }

      .intro-title {
        font-size: 2rem;
        padding: 0 20px;
      }

      /* Make interactive elements larger */
      .intro-btn {
        padding: 15px 40px;
        font-size: 1.1rem;
        width: 80%;
        max-width: 300px;
      }

      /* Timer adjustments */
      .timer {
        gap: 5px;
      }

      .timer-num {
        font-size: 1.2rem;
      }

      .timer-label {
        font-size: 0.6rem;
      }

      /* Gift Grid adjustments */
      .gift-grid {
        gap: 8px;
      }

      .gift-box {
        font-size: 1.2rem;
      }

      /* Modal adjustments */
      .modal-content {
        width: 85%;
        padding: 20px;
      }

      /* Card adjustments */
      .card {
        padding: 15px;
      }
    }

    /* Small phones */
    @media (max-width: 380px) {
      h1 {
        font-size: 1.5rem;
      }

      .gift-grid {
        grid-template-columns: repeat(3, 1fr);
      }
    }
  </style>
</head>

<body>

  <!-- Config Data (Hidden) -->
  <script>
    const CONFIG = {
      name: "Ph√πng Nh∆∞ √ù",
      nickname: "Nh∆∞ √ù",
      startDate: "2025-10-06T00:00:00", // YYYY-MM-DD
      musicLink: "nh·∫°c.mp3", // Path to music file
      note: "Nh∆∞ng anh h·ª©a s·∫Ω ƒëi c√πng em ƒë·∫øn t·∫≠n c√πng th·∫ø gi·ªõi c·ªßa hai ta."
    };
  </script>

  <!-- Canvas Background -->
  <canvas id="bg-canvas"></canvas>

  <!-- Intro Screen -->
  <div id="intro-overlay">
    <div class="intro-content">
      <div class="intro-title">√ä ku, <br>em c√≥ ph·∫£i l√† <span style="color:var(--text-highlight)">Ph√πng Nh∆∞ √ù</span>
        kh√¥ng?</div>
      <button class="intro-btn" id="yes-btn">D·∫° ƒë√∫ng ·∫° ‚ù§Ô∏è</button>
      <button class="intro-btn" id="no-btn">Kh√¥ng ph·∫£i üíî</button>
    </div>
  </div>

  <!-- Main App -->
  <div class="container" id="main-container">

    <!-- Left Column: Info & Timer -->
    <div class="left-col">
      <div class="header">
        <h1>G·ª≠i, Ph√πng Nh∆∞ √ù</h1>
        <div class="subtitle">"Anh y√™u em ‚Äî h∆°n t·∫•t c·∫£ b·∫•t k·ª≥ ƒëi·ªÅu g√¨ tr√™n ƒë·ªùi n√†y."</div>
      </div>

      <div class="card">
        <h3>Th·ªùi gian b√™n nhau</h3>
        <div class="subtitle">K·ªÉ t·ª´ ng√†y 06/10/2025</div>
        <div class="timer" id="timer">
          <div class="timer-box">
            <div class="timer-num" id="days">00</div>
            <div class="timer-label">Ng√†y</div>
          </div>
          <div class="timer-box">
            <div class="timer-num" id="hours">00</div>
            <div class="timer-label">Gi·ªù</div>
          </div>
          <div class="timer-box">
            <div class="timer-num" id="mins">00</div>
            <div class="timer-label">Ph√∫t</div>
          </div>
          <div class="timer-box">
            <div class="timer-num" id="secs">00</div>
            <div class="timer-label">Gi√¢y</div>
          </div>
        </div>
      </div>

      <div class="card letter-container" id="letter-card">
        <div class="envelope">
          <h2>üíå Th∆∞ g·ª≠i em</h2>
          <p style="font-size:0.8rem; margin-top:5px;">(nh·∫•n ƒë·ªÉ m·ªü)</p>
          <div class="wax-seal">Y</div>
        </div>
        <div class="letter-content" id="letter-text">
          <button type="button" class="letter-close-btn" id="letter-close">ƒê√≥ng</button>
          <p><strong>Nh∆∞ √ù √†,</strong></p>
          <p>T·ª´ ng√†y 06/10/2025, th·∫ø gi·ªõi c·ªßa anh ƒë√£ b·ªã em thay ƒë·ªïi t·ª´ khi em ƒë·∫øn v·ªõi anh. Kh√¥ng ph·∫£i v√¨ b·∫ßu tr·ªùi xanh h∆°n, m√† v√¨ c√≥ em
            trong ƒë√≥.</p>
          <p>M·ªói s√°ng th·ª©c d·∫≠y, anh kh√¥ng c√≤n nghƒ© ƒëi·ªÅu g√¨ kh√°c ngo√†i vi·ªác: "H√¥m nay, Nh∆∞ √ù c√≥ ·ªïn kh√¥ng?".</p>
          <p>Anh bi·∫øt, anh kh√¥ng ho√†n h·∫£o. Anh c√≥ th·ªÉ v·ª•ng v·ªÅ, c√≥ th·ªÉ kh√¥ng gi·ªèi th·ªÉ hi·ªán c·∫£m x√∫c, nh∆∞ng anh lu√¥n c·ªë g·∫Øng ƒë·ªÉ tr·ªü
            th√†nh ng∆∞·ªùi ƒë√†n √¥ng t·ªët h∆°n v√¨ em.</p>
          <p>Anh kh√¥ng h·ª©a s·∫Ω cho em c·∫£ th·∫ø gi·ªõi, v√¨ th·∫ø gi·ªõi qu√° r·ªông l·ªõn. Nh∆∞ng anh h·ª©a s·∫Ω ƒëi c√πng em ƒë·∫øn t·∫≠n c√πng th·∫ø
            gi·ªõi c·ªßa <strong>hai ta</strong>.</p>
          <p>C·∫£m ∆°n em v√¨ ƒë√£ l√† Ph√πng Nh∆∞ √ù c·ªßa anh.</p>
          <p>Y√™u em, <strong>Quang</strong>.</p>
          <div class="sticker" style="top:30px; right:30px;">‚ù§Ô∏è</div>
          <div class="sticker" style="bottom:30px; left:30px;">üåπ</div>
        </div>
      </div>
    </div>

    <!-- Right Column: Music & Gifts -->
    <div class="right-col">

      <div class="card music-player">
        <button class="play-btn" id="music-btn">‚ñ∂</button>
        <div style="flex:1">
          <div style="font-weight:bold">Trang web ƒë·∫ßu ti√™n c·ªßa anh</div>
          <div style="font-size:0.8rem; opacity:0.7">D√†nh cho em √° ku</div>
        </div>
        <div class="visualizer" id="visualizer">
          <!-- Bars generated by JS -->
        </div>
      </div>

      <div class="card">
        <h3>Ch·ªçn 1 c√°i ƒë√™ ku üéÅ</h3>
        <div class="subtitle">Hehe üòÅ </div>
        <div class="gift-grid" id="gift-grid">
          <!-- Generated by JS -->
        </div>
      </div>

      <p style="text-align:center; font-size:0.8rem; opacity:0.6; margin-top:20px;">
        l√†m cho c·ª•c c∆∞ng c·ªßa anh ‚ù§Ô∏è
      </p>

    </div>
  </div>

  <!-- Modal -->
  <div class="modal" id="modal">
    <div class="modal-content">
      <span class="modal-close">&times;</span>
      <h2 style="color:var(--primary); font-family:'Dancing Script'; margin-bottom:10px;">M√≥n qu√† nh·ªè</h2>
      <img id="modal-img" src="" alt="K·ª∑ ni·ªám c·ªßa hai ta" style="display:none;max-width:100%;border-radius:14px;margin-bottom:12px;box-shadow:0 8px 18px rgba(0,0,0,0.3);">
      <p id="modal-text" style="font-size:1.1rem; line-height:1.6"></p>
      <div style="margin-top:20px; font-size:0.8rem; color:#888;">(Ch·ª•p m√†n h√¨nh l·∫°i ƒë·ªÉ ƒë√≤i anh nh√©!)</div>
    </div>
  </div>

  <!-- Audio -->
  <audio id="bg-music" loop>
    <source src="nh·∫°c.mp3" type="audio/mpeg">
  </audio>

  <script>
    // --- 1. CONFIG & SETUP ---
    const startDate = new Date(CONFIG.startDate).getTime();

    // Gifts List
    const gifts = [
      "√îm c·ª•c c∆∞ng c·ªßa anh n√® ü´Ç",
      "Coi ai n·∫±m m√† d·ªÖ th∆∞∆°ng d·ªØ v·∫≠y tar üòò",
      "T·∫•m n√†y nh√¨n h√†i h√†i sao ·∫•y ü§£",
      "ƒêi c∆∞·ª°i tr√¢u lu√¥n gh√™ v·∫≠y sao üòè",
      "ƒê∆∞·ª£c ch·ªü em l√† s∆∞·ªõng nh·∫•t lu√¥n √° ‚ù§Ô∏è",
      "Hehe m√†u da 1 tr·ªùi 1 v·ª±c lu√¥n √° ü§≠",
      "Ng∆∞·ªùi g√¨ m√† d·ªÖ th∆∞∆°ng th·∫ø nh·ªâ üòç",
      "√Åo ƒë·ªè ch·ª©ng t·ªè y√™u anh üòÅ",
      "Nh√¨n c√°i m√° m√† mu·ªën c·∫Øn 1 c√°i gh√™ üòà"
    ];

    // ·∫¢nh ri√™ng cho t·ª´ng m√≥n qu√† (ƒë·∫∑t file ·∫£nh c·ªßa hai b·∫°n v√† s·ª≠a ƒë∆∞·ªùng d·∫´n ·ªü ƒë√¢y)
    // V√≠ d·ª•: l∆∞u ·∫£nh v√†o th∆∞ m·ª•c c√πng file HTML ho·∫∑c th∆∞ m·ª•c con "images/"
    const giftImages = [
      "1.jpg",
      "2.jpg",
      "3.jpg",
      "4.jpg",
      "5.jpg",
      "6.jpg",
      "7.jpg",
      "8.jpg",
      "9.jpg"
    ];

    // --- 2. INTRO LOGIC ---
    const introOverlay = document.getElementById('intro-overlay');
    const mainContainer = document.getElementById('main-container');
    const bgMusic = document.getElementById('bg-music');
    const yesBtn = document.getElementById('yes-btn');
    const noBtn = document.getElementById('no-btn');

    yesBtn.addEventListener('click', () => {
      introOverlay.classList.add('hidden');
      mainContainer.classList.add('active');

      // Force play music immediately on interaction
      bgMusic.volume = 0.5;
      const playPromise = bgMusic.play();
      if (playPromise !== undefined) {
        playPromise.then(_ => {
          console.log("Audio started automatically");
          musicBtn.innerText = "‚è∏"; // Update button to pause state
          isPlaying = true; // Sync state
          startVisualizer();
        })
          .catch(error => {
            console.log("Autoplay prevented:", error);
          });
      }
    });

    noBtn.addEventListener('mouseover', () => {
      const x = Math.random() * (window.innerWidth - 100);
      const y = Math.random() * (window.innerHeight - 50);
      noBtn.style.position = 'absolute';
      noBtn.style.left = x + 'px';
      noBtn.style.top = y + 'px';
    });

    noBtn.addEventListener('click', () => {
      alert("ƒê·ª´ng d·ªëi l√≤ng th·∫ø ch·ª©! ü•∫");
    });

    // --- 3. TIMER ---
    function updateTimer() {
      const now = new Date().getTime();
      const diff = now - startDate;

      const days = Math.floor(diff / (1000 * 60 * 60 * 24));
      const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const mins = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
      const secs = Math.floor((diff % (1000 * 60)) / 1000);

      document.getElementById('days').innerText = days < 10 ? "0" + days : days;
      document.getElementById('hours').innerText = hours < 10 ? "0" + hours : hours;
      document.getElementById('mins').innerText = mins < 10 ? "0" + mins : mins;
      document.getElementById('secs').innerText = secs < 10 ? "0" + secs : secs;
    }
    setInterval(updateTimer, 1000);
    updateTimer();

    // --- 4. LETTER ---
    const letterCard = document.getElementById('letter-card');
    const letterCloseBtn = document.getElementById('letter-close');
    let isLetterOpen = false;

    letterCard.addEventListener('click', () => {
      if (isLetterOpen) return;
      isLetterOpen = true;
      letterCard.classList.add('open');
    });

    letterCloseBtn.addEventListener('click', (e) => {
      e.stopPropagation();
      if (!isLetterOpen) return;
      isLetterOpen = false;
      letterCard.classList.remove('open');
    });

    // --- 5. MUSIC PLAYER ---
    const musicBtn = document.getElementById('music-btn');
    let isPlaying = false;

    musicBtn.addEventListener('click', () => {
      if (isPlaying) {
        bgMusic.pause();
        musicBtn.innerText = "‚ñ∂";
      } else {
        bgMusic.play();
        musicBtn.innerText = "‚è∏";
        startVisualizer();
      }
      isPlaying = !isPlaying;
    });

    // Visualizer Bars
    const visualizer = document.getElementById('visualizer');
    for (let i = 0; i < 8; i++) {
      let bar = document.createElement('div');
      bar.className = 'bar';
      bar.style.animationDuration = (0.3 + Math.random() * 0.5) + 's';
      visualizer.appendChild(bar);
    }
    function startVisualizer() {
      const bars = document.querySelectorAll('.bar');
      bars.forEach(bar => bar.style.animationPlayState = 'running');
    }

    // --- 6. GIFTS ---
    const giftGrid = document.getElementById('gift-grid');
    const modal = document.getElementById('modal');
    const modalText = document.getElementById('modal-text');
    const modalImg = document.getElementById('modal-img');
    const modalClose = document.querySelector('.modal-close');

    gifts.forEach((gift, index) => {
      const box = document.createElement('div');
      box.className = 'gift-box';

      const photoSrc = giftImages[index] || "";

      // T·∫°o c·∫•u tr√∫c h·ªôp qu√† 3D nh·ªè xinh + khung ·∫£nh
      box.innerHTML = `
        <div class="gift-inner">
          <div class="gift-photo-frame">
            ${photoSrc ? `<img src="${photoSrc}" alt="K·ª∑ ni·ªám c·ªßa hai ta ${index + 1}">` : ""}
          </div>
          <div class="gift-body"></div>
          <div class="gift-lid"></div>
          <div class="gift-ribbon"></div>
          <div class="gift-light"></div>
          <div class="gift-sparkles"></div>
          <div class="gift-icon">üéÅ</div>
        </div>
      `;

      box.onclick = () => {
        // Hi·ªáu ·ª©ng m·ªü h·ªôp qu√†
        box.classList.add('opening');
        setTimeout(() => box.classList.remove('opening'), 800);

        modalText.innerText = gift;

        if (photoSrc) {
          modalImg.src = photoSrc;
          modalImg.style.display = 'block';
        } else {
          modalImg.style.display = 'none';
        }

        modal.style.display = 'flex';
      };

      giftGrid.appendChild(box);
    });

    modalClose.onclick = () => modal.style.display = 'none';
    window.onclick = (e) => {
      if (e.target == modal) modal.style.display = 'none';
    }

    // --- 7. BACKGROUND CANVAS ANIMATION (COSMIC LOVE) ---
    const canvas = document.getElementById('bg-canvas');
    const ctx = canvas.getContext('2d');
    let width, height;

    function resize() {
      width = window.innerWidth;
      height = window.innerHeight;
      canvas.width = width;
      canvas.height = height;
    }
    window.addEventListener('resize', resize);
    resize();

    // Mouse Trail
    let mouse = { x: null, y: null };
    window.addEventListener('mousemove', e => {
      mouse.x = e.clientX;
      mouse.y = e.clientY;
      createSparkle(mouse.x, mouse.y);
    });
    window.addEventListener('mouseleave', () => { mouse.x = null; mouse.y = null; });

    // Classes
    class Star {
      constructor() {
        this.reset();
      }
      reset() {
        this.x = Math.random() * width;
        this.y = Math.random() * height;
        this.size = Math.random() * 2;
        this.blinkSpeed = 0.02 + Math.random() * 0.05;
        this.opacity = Math.random();
        this.direction = Math.random() > 0.5 ? 1 : -1;
      }
      update() {
        this.opacity += this.blinkSpeed * this.direction;
        if (this.opacity >= 1 || this.opacity <= 0.2) this.direction *= -1;
      }
      draw() {
        ctx.fillStyle = `rgba(255, 255, 255, ${this.opacity})`;
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
        ctx.fill();
      }
    }

    class FloatingHeart {
      constructor() {
        this.reset(true);
      }
      reset(initial = false) {
        this.x = Math.random() * width;
        this.y = initial ? Math.random() * height : height + 20;
        this.size = 10 + Math.random() * 20;
        this.speedY = 0.5 + Math.random() * 1.5;
        this.oscillation = Math.random() * 100;
        this.opacity = 0.1 + Math.random() * 0.3;
        this.color = Math.random() > 0.5 ? '#ff3366' : '#ff99b0';
      }
      update() {
        this.y -= this.speedY;
        this.x += Math.sin((this.y + this.oscillation) * 0.01) * 0.5;
        if (this.y < -50) this.reset();
      }
      draw() {
        ctx.fillStyle = this.color;
        ctx.globalAlpha = this.opacity;
        ctx.font = `${this.size}px Arial`;
        ctx.fillText("‚ù§", this.x, this.y);
        ctx.globalAlpha = 1;
      }
    }

    class ShootingStar {
      constructor() {
        this.reset();
      }
      reset() {
        this.x = Math.random() * width;
        this.y = Math.random() * height * 0.5;
        this.len = Math.random() * 80 + 10;
        this.speed = Math.random() * 10 + 6;
        this.size = Math.random() * 1 + 0.1;
        this.waitTime = new Date().getTime() + Math.random() * 3000 + 1000;
        this.active = false;
      }
      update() {
        if (this.active) {
          this.x -= this.speed;
          this.y += this.speed;
          if (this.x < 0 || this.y > height) {
            this.active = false;
            this.waitTime = new Date().getTime() + Math.random() * 5000 + 2000;
          }
        } else {
          if (new Date().getTime() > this.waitTime) {
            this.active = true;
            this.x = Math.random() * width + 200;
            this.y = Math.random() * height * 0.3 - 100;
          }
        }
      }
      draw() {
        if (this.active) {
          const gradient = ctx.createLinearGradient(this.x, this.y, this.x + this.len, this.y - this.len);
          gradient.addColorStop(0, "rgba(255,255,255,1)");
          gradient.addColorStop(1, "rgba(255,255,255,0)");
          ctx.strokeStyle = gradient;
          ctx.lineWidth = 2;
          ctx.beginPath();
          ctx.moveTo(this.x, this.y);
          ctx.lineTo(this.x + this.len, this.y - this.len);
          ctx.stroke();
        }
      }
    }

    let sparkles = [];
    function createSparkle(x, y) {
      sparkles.push({ x, y, size: Math.random() * 5 + 2, life: 1 });
    }

    // Init Objects
    const stars = [];
    for (let i = 0; i < 120; i++) stars.push(new Star());

    const hearts = [];
    for (let i = 0; i < 36; i++) hearts.push(new FloatingHeart());

    const shootingStar = new ShootingStar();

    // Soft orbiting bokeh orbs
    const orbs = [];
    const ORB_COUNT = 22;
    function initOrbs() {
      orbs.length = 0;
      for (let i = 0; i < ORB_COUNT; i++) {
        const radius = 40 + Math.random() * 80;
        orbs.push({
          x: Math.random() * width,
          y: Math.random() * height,
          radius,
          baseAlpha: 0.08 + Math.random() * 0.12,
          hue: 330 + Math.random() * 40,
          speed: 0.2 + Math.random() * 0.4,
          offset: Math.random() * Math.PI * 2,
          depth: 0.3 + Math.random() * 0.9
        });
      }
    }
    initOrbs();

    // Simple constellations (t·ªâ l·ªá theo m√†n h√¨nh)
    const constellations = [
      [
        { x: 0.12, y: 0.22 },
        { x: 0.2, y: 0.27 },
        { x: 0.28, y: 0.24 },
        { x: 0.34, y: 0.3 }
      ],
      [
        { x: 0.68, y: 0.18 },
        { x: 0.74, y: 0.26 },
        { x: 0.8, y: 0.22 }
      ],
      [
        { x: 0.2, y: 0.72 },
        { x: 0.27, y: 0.78 },
        { x: 0.35, y: 0.74 }
      ]
    ];

    function drawBackgroundLayer(time) {
      // Cinematic radial + vignette
      const maxR = Math.max(width, height) * 0.9;
      const grad = ctx.createRadialGradient(
        width * 0.5,
        height * 0.45,
        0,
        width * 0.5,
        height * 0.45,
        maxR
      );
      grad.addColorStop(0, 'rgba(255, 200, 220, 0.10)');
      grad.addColorStop(0.4, 'rgba(144, 12, 63, 0.28)');
      grad.addColorStop(1, 'rgba(0, 0, 0, 0.94)');
      ctx.fillStyle = grad;
      ctx.fillRect(0, 0, width, height);

      // Subtle top glow
      const topGrad = ctx.createRadialGradient(
        width * 0.15,
        height * 0.0,
        0,
        width * 0.15,
        height * 0.0,
        height * 0.6
      );
      topGrad.addColorStop(0, 'rgba(255, 220, 250, 0.18)');
      topGrad.addColorStop(1, 'rgba(0, 0, 0, 0)');
      ctx.fillStyle = topGrad;
      ctx.fillRect(0, 0, width, height);
    }

    function drawOrbs(time) {
      const cx = width / 2;
      const cy = height / 2;
      const dx = mouse.x != null ? (mouse.x - cx) / cx : 0;
      const dy = mouse.y != null ? (mouse.y - cy) / cy : 0;

      ctx.save();
      ctx.globalCompositeOperation = 'screen';
      orbs.forEach((o) => {
        const t = time * o.speed + o.offset;
        const swayX = Math.sin(t) * 25 * o.depth;
        const swayY = Math.cos(t * 0.6) * 18 * o.depth;
        const x = o.x + swayX + dx * 40 * o.depth;
        const y = o.y + swayY + dy * 40 * o.depth;
        const pulse = 0.6 + 0.4 * Math.sin(t * 1.2);
        const alpha = o.baseAlpha * pulse;

        const g = ctx.createRadialGradient(x, y, 0, x, y, o.radius);
        g.addColorStop(0, `hsla(${o.hue}, 90%, 86%, ${alpha})`);
        g.addColorStop(0.5, `hsla(${o.hue + 10}, 90%, 70%, ${alpha * 0.9})`);
        g.addColorStop(1, 'rgba(0,0,0,0)');
        ctx.fillStyle = g;
        ctx.beginPath();
        ctx.arc(x, y, o.radius, 0, Math.PI * 2);
        ctx.fill();
      });
      ctx.restore();
    }

    function drawHeartNebula(time) {
      const cx = width * 0.5;
      const cy = height * 0.45;
      const baseScale = Math.min(width, height) * 0.045;
      const breathing = 1 + 0.04 * Math.sin(time * 2.0);
      const scale = baseScale * breathing;

      ctx.save();
      ctx.translate(cx, cy);
      ctx.scale(scale, -scale);

      const glow = ctx.createRadialGradient(0, 0, 0, 0, 0, 18);
      const alphaCore = 0.16 + 0.06 * Math.sin(time * 3.0);
      glow.addColorStop(0, `rgba(255, 240, 255, ${alphaCore})`);
      glow.addColorStop(0.4, 'rgba(255, 140, 190, 0.18)');
      glow.addColorStop(1, 'rgba(0,0,0,0)');
      ctx.fillStyle = glow;

      ctx.beginPath();
      const steps = 60;
      for (let i = 0; i <= steps; i++) {
        const t = (Math.PI * 2 * i) / steps;
        const x = 16 * Math.sin(t) ** 3;
        const y =
          13 * Math.cos(t) -
          5 * Math.cos(2 * t) -
          2 * Math.cos(3 * t) -
          Math.cos(4 * t);
        if (i === 0) ctx.moveTo(x, y);
        else ctx.lineTo(x, y);
      }
      ctx.closePath();
      ctx.globalAlpha = 0.95;
      ctx.fill();
      ctx.restore();
    }

    function drawConstellations(time) {
      const baseAlpha = 0.22 + 0.08 * Math.sin(time * 1.7);
      ctx.save();
      ctx.lineWidth = 0.9;
      ctx.lineCap = 'round';
      ctx.lineJoin = 'round';
      ctx.globalCompositeOperation = 'screen';

      constellations.forEach(points => {
        ctx.beginPath();
        points.forEach((p, idx) => {
          const x = p.x * width;
          const y = p.y * height;
          if (idx === 0) ctx.moveTo(x, y);
          else ctx.lineTo(x, y);
        });
        const grad = ctx.createLinearGradient(
          points[0].x * width,
          points[0].y * height,
          points[points.length - 1].x * width,
          points[points.length - 1].y * height
        );
        grad.addColorStop(0, `rgba(255, 220, 255, ${baseAlpha})`);
        grad.addColorStop(1, `rgba(255, 150, 210, ${baseAlpha})`);
        ctx.strokeStyle = grad;
        ctx.stroke();

        // Nodes
        points.forEach((p, idx) => {
          const x = p.x * width;
          const y = p.y * height;
          const pulse =
            0.4 +
            0.6 *
              Math.max(
                0,
                Math.sin(time * 3 + idx * 1.3 + p.x * 5 + p.y * 7)
              );
          ctx.beginPath();
          ctx.fillStyle = `rgba(255, 255, 255, ${baseAlpha + pulse * 0.25})`;
          ctx.arc(x, y, 1.2 + pulse * 1.4, 0, Math.PI * 2);
          ctx.fill();
        });
      });

      ctx.restore();
    }

    function animate() {
      ctx.clearRect(0, 0, width, height);
      const time = Date.now() * 0.001;

      // Deep gradient + soft vignettes
      drawBackgroundLayer(time);

      // Orbiting bokeh orbs reacting to mouse
      drawOrbs(time);

      // Stars
      stars.forEach(s => { s.update(); s.draw(); });

      // Heart-shaped nebula in the middle of the sky
      drawHeartNebula(time);

      // Constellation lines
      drawConstellations(time);

      // Shooting Star
      shootingStar.update();
      shootingStar.draw();

      // Hearts
      hearts.forEach(h => { h.update(); h.draw(); });

      // Sparkles (Mouse Trail)
      sparkles.forEach((s, index) => {
        s.life -= 0.05;
        ctx.fillStyle = `rgba(255, 255, 255, ${s.life})`;
        ctx.beginPath();
        ctx.arc(s.x, s.y, s.size, 0, Math.PI * 2);
        ctx.fill();
        if (s.life <= 0) sparkles.splice(index, 1);
      });

      requestAnimationFrame(animate);
    }
    animate();

  </script>
</body>
</html>